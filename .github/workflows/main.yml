      - name: Setup Kali Desktop and RDP
        run: |
          # 1. Add Kali Linux repositories and GPG keys
          sudo apt-get update && sudo apt-get install -y wget gnupg
          wget -q -O - https://archive.kali.org/archive-key.asc | sudo apt-key add -
          echo "deb http://http.kali.org/kali kali-rolling main contrib non-free" | sudo tee /etc/apt/sources.list.d/kali.list
          
          # 2. Update and install packages (using DEBIAN_FRONTEND to skip prompts)
          sudo apt-get update
          sudo DEBIAN_FRONTEND=noninteractive apt-get install -y kali-desktop-xfce xrdp
          
          # 3. Configure XRDP to use XFCE session
          echo "xfce4-session" > ~/.xsession
          sudo systemctl enable xrdp
          sudo systemctl start xrdp
          
          # 4. Create a user for RDP login
          sudo useradd -m kaliuser
          echo "kaliuser:YourSecurePassword123" | sudo chpasswd
          sudo usermod -aG sudo kaliuser
